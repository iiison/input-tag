"use strict";!function(n){function e(n){var e;return g(n),f(),e=s(),t(e),e}function t(n){function e(){var e;return s||h.addExt?(e=s?c:c+E.defaultMail,o(n,e,m.cloneNode(!0)),a(n.ul,"error"),!0):(i(n.ul,"error"),!1)}function t(){var e;0===c.length&&(e=n.ul.getElementsByTagName("li"),1===d?i(e[e.length-2],"error"):r(e[e.length-2]),d=2===d?1:2)}var c,s,m=l(),d=1;n.ul.addEventListener("click",function(e){n.input.focus()}),n.input.addEventListener("keyup",function(n){var a={E32:e,E13:e,E8:t},i="E"+n.keyCode;c=this.value,s=u(c.trim()),a[i]&&"function"==typeof a[i]&&a[i]()}),n.input.addEventListener("paste",function(t){window.setTimeout(function(){for(var t,a=n.input.value.split(","),i=[],r=a.length;r>0;r--)c=a[0].trim(),s=u(c.trim()),t=e(),t||i.push(a[0].trim()),a.splice(0,1);i.length>0&&(a=i.join().replace(/,/g,", "),n.input.value=a)},10)})}function a(n,e){var t=new RegExp(e,"g");n.className=n.className.replace(t,"")}function i(n,e){n.className+=" "+e}function r(n){n.remove()}function c(n,e){var t=n.getElementsByClassName("tag-cross")[0];n.addEventListener("click",function(n){e.input.value=this.getElementsByClassName("tag-email")[0].innerHTML.trim(),r(this)}),t.addEventListener("click",function(n){r(this.parentNode)})}function o(n,e,t){t.getElementsByClassName("tag-email")[0].innerHTML=e,n.ul.insertBefore(t,n.li),c(t,n),n.input.value=""}function l(){var n=d("li"),e=d("span"),t=d("span");return n.className="tag-list",e.className="tag-email",t.className="tag-cross",t.innerHTML="&#215;",n.appendChild(e),n.appendChild(t),n}function u(n){var e=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return e.test(n)}function s(){return m(h.container)}function m(n){var e,t=d("ul"),a=d("li"),i=d("input");return t.className="tag-container",a.className="tag-list-main",i.type="text",i.className="tag-hidden",n.appendChild(t).appendChild(a).appendChild(i),e={ul:t,li:a,input:i}}function d(n){var e;return n&&(e=document.createElement(n)),e}function f(){var n=h.container&&h.container.length>0?h.container[0]:h.container;n=p(n)?n:E.container,h.container=n}function p(n){try{return n instanceof HTMLElement}catch(e){return"object"==typeof n&&1===n.nodeType&&"object"==typeof n.style&&"object"==typeof n.ownerDocument}}function g(n){n&&n===Object(n)?h=v(n,E):Object.create(E).cons.call(h)}function v(n,e){var t={};Object.create(e).cons.call(t);for(var a in n)t[a]=n[a];return t}var h={},E={cons:function(){this.container=document.getElementsByTagName("body")[0],this.multiple=!1,this.addExt=!1},container:document.getElementsByTagName("body")[0],defaultMail:"@gmail.com"};n.Tag=function(n){return e(n)}}(window);